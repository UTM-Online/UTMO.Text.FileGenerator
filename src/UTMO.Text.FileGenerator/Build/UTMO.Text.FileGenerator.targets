<Project>

    <ItemGroup Condition="'$(DisplayGeneratedOutput)' == 'true'">
        <None Include="$(IntermidateOutputDirectory)\**" Condition="Exists($(IntermidateOutputDirectory))">
            <Link>$(GeneratedOutputVDirName)\%(RecursiveDir)%(Filename)%(Extension)</Link>
        </None>
    </ItemGroup>
    
    <Target Name="CopyLiquidTemplates" BeforeTargets="Build">
        <ItemGroup>
            <LiquidTemplates Include="$(MSBuildProjectDirectory)Templates\*.liquid" />
            <LiquidTemplates Include="$(AdditionalTemplateFiles)" Condition="'$(AdditionalTemplateFiles)' != ''" />
        </ItemGroup>
        <Copy SourceFiles="@(LiquidTemplates)" DestinationFolder="$(OutputPath)\templates" />
    </Target>
    
    <Target Name="CleanGeneratedOutput" BeforeTargets="Build">
        <Message Text="Removing generated output directory: $(IntermidateOutputDirectory)" Importance="high" />
        <RemoveDir Directories="$(IntermidateOutputDirectory)" />
    </Target>
    
</Project>